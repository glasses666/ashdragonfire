# 阵营转换系统设计文档

基于故事背景，本文档详细设计了阵营转换的机制、物品、配方和游戏玩法。

---

## 🎯 核心转换机制

### 1. 龙族 → 人类阵营（驯服/伙伴）

**物品**: **龙魂引** (Dragon Soul Lure)

**制作配方**:
```
以太核心 (Aether Core) x1
灰烬之血 (Ash Blood) x2
龙晶锭 (Dragon Crystal Ingot) x4
古代符石 (Ancient Rune Stone) x1
```

**使用方法**:
1. 手持龙魂引右键点击野生龙族实体
2. 触发"灵魂链接仪式"动画（粒子效果：紫色螺旋）
3. 有 70% 成功率（可通过声望提升）
4. 成功后龙族成为玩家的伙伴，跟随并战斗

**效果**:
- 龙族实体变为友好状态
- 显示"已链接"标记
- 可以骑乘和指挥
- 保留原有能力和外观

---

### 2. 人类 → 龙族阵营（净化）

**物品**: **灰烬之血药剂** (Potion of Ash Blood)

**制作配方**:
```
灰烬之血 (Ash Blood) x3
龙焰心核 (Dragonfire Core) x1
水瓶 (Water Bottle) x1
地狱疣 (Nether Wart) x1
```

**使用方法**:
1. 对人类士兵实体投掷药剂（飞溅药剂）
2. 触发"净化仪式"动画（粒子效果：红色火焰）
3. 100% 成功率
4. 人类士兵转变为"誓火者"（龙族阵营）

**效果**:
- 人类实体变为龙族阵营
- 外观变化：红色龙鳞装甲
- 获得火焰抗性
- 攻击人类阵营单位

---

### 3. 龙族 → 人类阵营（强制支配）

**物品**: **神经支配者** (Neural Dominator)

**制作配方**:
```
钢铁合金 (Steel Alloy) x6
能量核心方块 (Energy Core Block) x1
机械臂 (Mechanical Arm) x2
征服弹 (Subjugation Bolt) x1
```

**使用方法**:
1. 手持神经支配者瞄准龙族实体
2. 右键发射"征服弹"
3. 命中后触发"神经支配"动画（粒子效果：蓝色电流）
4. 100% 成功率但消耗耐久
5. 龙族被洗脑成为"机械化巨龙"

**效果**:
- 龙族实体变为人类阵营
- 外观变化：钢铁装甲覆盖
- 失去部分魔法能力
- 获得机械增强（更高防御）
- 完全服从命令

---

### 4. 人类 → 龙族阵营（驯服/说服）

**物品**: **龙语卷轴** (Dragon Tongue Scroll)

**制作配方**:
```
古代符石 (Ancient Rune Stone) x2
纸 (Paper) x3
龙晶粉末 (Dragon Crystal Dust) x1
```

**使用方法**:
1. 手持卷轴右键点击人类士兵
2. 触发"说服"对话（GUI界面）
3. 成功率取决于玩家声望和士兵等级
4. 成功后士兵加入龙族阵营

**效果**:
- 人类实体变为龙族阵营
- 保留原有装备和能力
- 成为龙族的盟友

---

## 📦 新增物品列表

### 转换核心物品

| 物品名称 | 英文名 | 用途 | 稀有度 |
|---------|--------|------|--------|
| 龙魂引 | Dragon Soul Lure | 驯服龙族 | 史诗 |
| 灰烬之血药剂 | Potion of Ash Blood | 净化人类 | 稀有 |
| 神经支配者 | Neural Dominator | 支配龙族 | 史诗 |
| 龙语卷轴 | Dragon Tongue Scroll | 说服人类 | 普通 |

### 制作材料

| 物品名称 | 英文名 | 获取方式 |
|---------|--------|----------|
| 征服弹 | Subjugation Bolt | 机械工作台制作 |
| 龙晶粉末 | Dragon Crystal Dust | 龙晶锭粉碎 |
| 灵魂碎片 | Soul Fragment | 击败敌对实体掉落 |
| 控制芯片 | Control Chip | 能量核心方块制作 |

### 转换后实体

| 实体名称 | 英文名 | 来源 | 特点 |
|---------|--------|------|------|
| 誓火者 | Flame-Sworn | 被净化的人类 | 火焰能力，龙鳞装甲 |
| 机械化巨龙 | Mechanized Drake | 被支配的龙 | 钢铁装甲，高防御 |
| 链接之龙 | Bonded Dragon | 被驯服的龙 | 保留原貌，可骑乘 |
| 龙族盟友 | Dragon Ally | 被说服的人类 | 保留装备，龙族阵营 |

---

## 🎮 游戏机制详解

### 声望系统影响

**龙族声望**:
- 等级 1-3: 龙魂引成功率 50%
- 等级 4-6: 龙魂引成功率 70%
- 等级 7-10: 龙魂引成功率 90%

**人类声望**:
- 等级 1-3: 神经支配者耐久消耗 100%
- 等级 4-6: 神经支配者耐久消耗 50%
- 等级 7-10: 神经支配者耐久消耗 25%

### 转换限制

1. **冷却时间**: 每次转换后有 60 秒冷却
2. **范围限制**: 必须在 5 格内使用
3. **等级限制**: Boss 级实体无法被转换
4. **数量限制**: 每个玩家最多同时拥有 3 个转换单位

### 转换失败惩罚

- **龙魂引失败**: 龙族进入狂暴状态，攻击力提升 50%
- **龙语卷轴失败**: 人类士兵警觉，逃跑并呼叫增援
- **神经支配者故障**: 装置过热，玩家受到 5 点伤害

---

## 🔧 技术实现要点

### 实体数据标记

```java
// 转换状态标记
entity.getPersistentData().putString("ConversionType", "bonded");
entity.getPersistentData().putUUID("OwnerUUID", player.getUUID());
entity.getPersistentData().putLong("ConversionTime", System.currentTimeMillis());
```

### AI 行为切换

```java
// 切换目标选择器
entity.targetSelector.removeAllGoals();
entity.targetSelector.addGoal(1, new FollowOwnerGoal(entity, 1.0D, 10.0F, 2.0F));
entity.targetSelector.addGoal(2, new DefendOwnerGoal(entity));
```

### 外观变化

```java
// 更换纹理和模型
entity.setCustomTexture("ashdragonfire:textures/entity/mechanized_drake.png");
entity.addArmorLayer(ArmorLayer.STEEL);
```

---

## 📊 平衡性设计

### 成本对比

| 转换方式 | 材料成本 | 时间成本 | 成功率 | 效果持久性 |
|---------|---------|---------|--------|-----------|
| 龙魂引 | 高 | 中 | 70% | 永久 |
| 灰烬之血药剂 | 中 | 低 | 100% | 永久 |
| 神经支配者 | 极高 | 低 | 100% | 永久（但有耐久） |
| 龙语卷轴 | 低 | 高 | 40-80% | 永久 |

### 战略价值

- **龙魂引**: 适合长期培养强力伙伴
- **灰烬之血药剂**: 快速扩充龙族军队
- **神经支配者**: 人类阵营的终极武器
- **龙语卷轴**: 低成本但需要技巧

---

## 🎨 视觉效果设计

### 粒子效果

1. **灵魂链接**: 紫色螺旋粒子，从玩家到龙族
2. **净化仪式**: 红色火焰粒子，环绕人类士兵
3. **神经支配**: 蓝色电流粒子，击中目标后扩散
4. **说服**: 金色光点，从卷轴飘向目标

### 音效设计

1. **龙魂引**: 神秘的吟唱声 + 龙吼
2. **灰烬之血药剂**: 燃烧声 + 净化音效
3. **神经支配者**: 电流声 + 机械音
4. **龙语卷轴**: 古老的龙语低语

---

## 🏆 成就系统

| 成就名称 | 条件 | 奖励 |
|---------|------|------|
| 龙之友 | 成功驯服第一条龙 | 声望 +100 |
| 净化者 | 转化 10 个人类士兵 | 解锁特殊龙鳞装甲 |
| 支配者 | 使用神经支配者 5 次 | 解锁高级机械装备 |
| 外交官 | 成功说服 20 个士兵 | 声望 +200 |
| 阵营大师 | 完成所有转换类型 | 特殊称号 + 稀有物品 |

---

## 📝 配方总结

### 龙魂引配方
```
[龙晶锭] [以太核心] [龙晶锭]
[灰烬之血] [古代符石] [灰烬之血]
[龙晶锭] [空] [龙晶锭]
```

### 灰烬之血药剂配方
```
酿造台:
水瓶 + 地狱疣 = 粗制药水
粗制药水 + 灰烬之血 = 灰烬之血药剂
灰烬之血药剂 + 火药 = 飞溅型灰烬之血药剂
```

### 神经支配者配方
```
[钢铁合金] [控制芯片] [钢铁合金]
[机械臂] [能量核心方块] [机械臂]
[钢铁合金] [征服弹] [钢铁合金]
```

### 龙语卷轴配方
```
[纸] [古代符石] [纸]
[龙晶粉末] [纸] [空]
[空] [古代符石] [空]
```

---

**设计完成时间**: 2025-01-01  
**版本**: 1.0  
**状态**: 待实现

