# 项目概览

## 模组信息

- **名称**: 灰烬与龙焰:永燃之战 (Ash & Dragonfire: Eternal Conflict)
- **模组ID**: ashdragonfire
- **版本**: 1.0.0
- **Minecraft**: 1.21.1
- **Forge**: 52.0.29+
- **作者**: GlasserDraco

## 项目状态

✅ **已完成**:
- 项目基础结构
- 核心注册系统 (物品、方块、实体)
- 阵营系统框架
- 种族系统框架
- 能量系统 (魔力/科技能量)
- 技能系统框架
- 事件系统框架
- 配置系统
- 网络通信框架
- 语言文件 (中英文)
- API 接口

⚠️ **待完成**:
- 实体类实现与渲染
- GUI 界面实现
- 完整的技能实现
- 世界生成配置
- 数据持久化 (Capability)
- 网络包实现
- 材质与模型
- 音效与粒子效果

## 核心模块说明

### 1. 阵营系统 (faction/)

**核心类**:
- `Faction.java`: 阵营枚举 (龙族/人类/中立)
- `FactionManager.java`: 阵营管理器,处理玩家阵营数据
- `FactionData.java`: 玩家阵营数据,包含声望、统计等

**功能**:
- 玩家阵营选择与管理
- 声望系统 (10级)
- 阵营关系判定 (敌对/友好)
- 阵营统计数据

**扩展点**:
- 添加新阵营
- 自定义声望等级
- 阵营特殊奖励

### 2. 种族系统 (race/)

**核心类**:
- `RaceType.java`: 种族类型枚举
- `RaceAbility.java`: 种族能力接口

**功能**:
- 种族与阵营绑定
- 种族能力框架

**扩展点**:
- 实现具体种族能力
- 添加变身系统
- 种族被动特性

### 3. 能量系统 (energy/)

**核心类**:
- `IEnergyUser.java`: 统一能量接口
- `ManaSystem.java`: 龙族魔力系统
- `TechEnergySystem.java`: 人类科技能量系统

**功能**:
- 双能量系统 (魔力/科技能量)
- 能量消耗与恢复
- Forge Energy 兼容

**扩展点**:
- 能量转换器
- 能量增幅器
- 环境影响能量恢复

### 4. 技能系统 (ability/)

**核心类**:
- `AbilityRegistry.java`: 技能注册器
- `dragon/FireBreathAbility.java`: 龙族火焰吐息示例
- `human/CannonFireAbility.java`: 人类火炮示例

**功能**:
- 技能注册与管理
- 技能冷却系统
- 能量消耗
- 技能效果 (伤害、粒子、音效)

**扩展点**:
- 添加新技能
- 技能升级系统
- 技能组合连招

### 5. 物品系统 (item/)

**已注册物品**:
- 龙族装备: 龙晶杖、龙鳞甲、龙焰心核
- 人类装备: 能量步枪、机械臂、火炮弹药
- 共享材料: 古代符石、以太核心、灰烬之血
- 资源: 龙晶矿石、龙晶锭、钢铁合金

**扩展点**:
- 实现装备特殊效果
- 添加武器攻击逻辑
- 制作配方

### 6. 方块系统 (block/)

**已注册方块**:
- 龙族方块: 龙晶矿石、熔岩祭坛、龙晶方块
- 人类方块: 钢铁方块、机械工作台、能量核心
- 共享方块: 遗迹石砖、古代符文方块、以太水晶

**扩展点**:
- 功能方块 (工作台、祭坛)
- 方块实体 (TileEntity)
- 矿石生成配置

### 7. 实体系统 (entity/)

**规划实体**:
- 龙族: 龙族守卫、火焰龙
- 人类: 机械兵、飞艇
- Boss: 远古巨龙、机械神
- 投射物: 龙焰球、能量射线

**待实现**:
- 实体类
- AI 行为
- 渲染器
- 动画

### 8. 世界生成 (world/)

**维度**:
- 焰冠群岛: 龙族维度
- 齿轮之城: 人类维度

**待实现**:
- 维度配置 (data/dimension/)
- 生物群系定义
- 结构生成
- 矿石生成

### 9. 事件系统 (event/)

**核心类**:
- `ModEvents.java`: 游戏事件监听
- `WarEventManager.java`: 战争事件管理

**功能**:
- 玩家登录/退出处理
- 战斗事件处理
- 定期战争事件
- 世界Boss事件

**扩展点**:
- 自定义事件类型
- 事件奖励系统
- 动态世界变化

### 10. 网络通信 (network/)

**核心类**:
- `PacketHandler.java`: 网络包处理器

**待实现**:
- 阵营选择包
- 技能使用包
- 数据同步包
- 事件触发包

### 11. 配置系统 (core/)

**配置项**:
- 阵营系统参数
- 能量系统参数
- 技能伤害与消耗
- 事件触发周期
- 世界生成设置

**配置文件**: `config/ashdragonfire-common.toml`

### 12. API 系统 (api/)

**接口**:
- `IFactionProvider.java`: 阵营提供者接口

**用途**:
- 允许其他模组集成
- 扩展阵营系统
- 自定义能力系统

## 代码规范

### 命名规范
- 类名: PascalCase (如 `FactionManager`)
- 方法名: camelCase (如 `getPlayerFaction`)
- 常量: UPPER_SNAKE_CASE (如 `MOD_ID`)
- 包名: lowercase (如 `faction`)

### 注释规范
- 所有公共类和方法都有 JavaDoc 注释
- 注释包含功能说明、参数说明、返回值说明
- 复杂逻辑添加行内注释

### 代码风格
- 使用 4 空格缩进
- 每行最多 120 字符
- 使用现代 Java 特性 (switch expressions, var 等)

## 构建与测试

### 构建命令

```bash
# 清理构建
./gradlew clean

# 构建模组
./gradlew build

# 运行客户端
./gradlew runClient

# 运行服务器
./gradlew runServer

# 生成 IDE 配置
./gradlew genIntellijRuns
```

### 输出文件

构建成功后,jar 文件位于:
- `build/libs/ashdragonfire-1.0.0.jar`

## 下一步开发建议

### 优先级 1 (核心功能)
1. 实现数据持久化 (Capability 系统)
2. 实现网络包通信
3. 创建阵营选择 GUI
4. 实现更多技能

### 优先级 2 (游戏内容)
1. 实现基础实体 (龙族守卫、机械兵)
2. 配置世界生成
3. 添加制作配方
4. 实现功能方块

### 优先级 3 (完善体验)
1. 添加材质与模型
2. 添加音效
3. 优化粒子效果
4. 实现 GUI 界面

### 优先级 4 (扩展功能)
1. 任务系统
2. 经济系统
3. 领地系统
4. 更多维度

## 技术债务

1. **数据持久化**: 当前使用内存存储,需要改为 Capability 或 SavedData
2. **网络同步**: 网络包框架已建立,但具体实现待完成
3. **实体渲染**: 实体注册已完成,但渲染器未实现
4. **GUI 系统**: GUI 类未实现
5. **世界生成**: 维度键已定义,但配置文件未创建

## 性能考虑

- 能量系统每 tick 更新,需要优化
- 战争事件检测需要高效算法
- 粒子效果需要限制数量
- 网络包需要压缩数据

## 兼容性

- 使用标准 Forge API,与其他模组兼容性良好
- 能量系统兼容 Forge Energy
- 提供 API 接口供其他模组集成

## 文档

- `README.md`: 用户文档
- `DEVELOPMENT.md`: 开发指南
- `PROJECT_OVERVIEW.md`: 本文件,项目概览
- 代码注释: 详细的 JavaDoc

## 联系方式

- GitHub: https://github.com/glasserdraco/ashdragonfire
- Issues: https://github.com/glasserdraco/ashdragonfire/issues

---

最后更新: 2025-01-01
项目状态: 框架完成,待实现具体功能

